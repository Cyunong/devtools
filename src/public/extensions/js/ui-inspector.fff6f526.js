(function(e){function t(t){for(var r,d,i=t[0],a=t[1],s=t[2],u=0,b=[];u<i.length;u++)d=i[u],Object.prototype.hasOwnProperty.call(o,d)&&o[d]&&b.push(o[d][0]),o[d]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var a=n[i];0!==o[a]&&(r=!1)}r&&(c.splice(t--,1),e=d(d.s=n[0]))}return e}var r={},o={"ui-inspector":0},c=[];function d(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.e=function(){return Promise.resolve()},d.m=e,d.c=r,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)d.d(n,r,function(t){return e[t]}.bind(null,r));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/extensions/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=a;c.push([2,"chunk-vendors","chunk-common"]),n()})({2:function(e,t,n){e.exports=n("81a5")},"291f":function(e,t,n){"use strict";n("d075")},"2fcf":function(e,t,n){"use strict";n("e5cf")},3918:function(e,t,n){"use strict";n("b0e7")},"81a5":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=n("7864"),c=n("f548"),d=n("9c4e"),i=n("32ae"),a=(n("f3fc"),n("163d"),Object(r["hb"])("data-v-748b28ef"));Object(r["I"])("data-v-748b28ef");var s={class:"ui-inspector-wrapper"},l={class:"sider-bar"};Object(r["G"])();var u=a((function(e,t,n,o,u,b){var f=i["a"],p=d["a"],v=c["a"];return Object(r["F"])(),Object(r["k"])("div",s,[Object(r["o"])("div",l,[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.panes,(function(t,n){return Object(r["F"])(),Object(r["k"])(f,{key:n,effect:"dark",content:t.tip,placement:"right"},{default:a((function(){return[Object(r["o"])("div",{class:"pane-thumb",onClick:function(n){return e.togglePane(t.id)}},[Object(r["o"])("i",{class:[t.icon,t.show?"pane-showed":""],style:{fontWeight:t.show?"500":"400"}},null,6)],8,["onClick"])]})),_:2},1032,["content"])})),128))]),Object(r["o"])(v,{class:"custom-resizer",layout:"vertical",onPaneResizeStop:e.onPaneResizeStop},{default:a((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.visiablePanes,(function(e,t){return Object(r["F"])(),Object(r["k"])(r["b"],{key:t},[0!==t?(Object(r["F"])(),Object(r["k"])(p,{key:0,id:"resizer-"+t},null,8,["id"])):Object(r["l"])("",!0),(Object(r["F"])(),Object(r["k"])(Object(r["Q"])(e.component),{class:"pane-wrap",style:e.style},null,8,["style"]))],64)})),128))]})),_:1},8,["onPaneResizeStop"])])})),b=(n("4de4"),n("7db0"),n("5502")),f=n("a1d2"),p=n("4104"),v=(n("3bc8"),Object(r["hb"])("data-v-976c4552"));Object(r["I"])("data-v-976c4552");var O={class:"screenshot-wrap",ref:"screenshotRef"},h={class:"action-bar"};Object(r["G"])();var m=v((function(e,t,n,o,c,d){var a,s,l,u,b=Object(r["O"])("refresh"),f=p["a"],m=i["a"],j=Object(r["O"])("top-left");return Object(r["F"])(),Object(r["k"])("div",O,[Object(r["o"])("div",h,[Object(r["o"])(m,{class:"item",effect:"dark",content:"refresh",placement:"bottom"},{default:v((function(){return[Object(r["o"])(f,{class:"action-btn",size:20,onClick:e.update},{default:v((function(){return[Object(r["o"])(b)]})),_:1},8,["onClick"])]})),_:1}),Object(r["o"])(m,{class:"item",effect:"dark",content:"select DOM/render node",placement:"bottom"},{default:v((function(){return[Object(r["o"])(f,{class:"action-btn",size:20,color:e.selectIconColor,onClick:e.toggleSelectMode},{default:v((function(){return[Object(r["o"])(j)]})),_:1},8,["color","onClick"])]})),_:1})]),Object(r["o"])("div",{class:"screenshot-img-wrap",style:{width:"100%"},onClickCapture:t[1]||(t[1]=function(){return e.selectNode&&e.selectNode.apply(e,arguments)})},[Object(r["o"])("img",{src:e.screenshot,style:{width:"100%"}},null,8,["src"]),Object(r["o"])("div",{class:"node-bounds margin-wrap",style:null===(a=e.selectedNodeBounds)||void 0===a?void 0:a.marginBounds},null,4),Object(r["o"])("div",{class:"node-bounds border-wrap",style:null===(s=e.selectedNodeBounds)||void 0===s?void 0:s.borderBounds},null,4),Object(r["o"])("div",{class:"node-bounds padding-wrap",style:null===(l=e.selectedNodeBounds)||void 0===l?void 0:l.paddingBounds},null,4),Object(r["o"])("div",{class:"node-bounds content-wrap",style:null===(u=e.selectedNodeBounds)||void 0===u?void 0:u.contentBounds},null,4)],32)],512)})),j=n("b98b"),g=n("f2fe"),y=n("d257"),k=n("a313"),x=Object(r["p"])({name:"Screenshot",components:{Refresh:j["a"],TopLeft:g["a"]},setup:function(){var e=Object(r["K"])(null),t=Object(b["b"])(),n=function(){var n,r=(null===(n=e.value)||void 0===n?void 0:n.clientWidth)||0,o=t.state.screenshot||{},c=o.metadata;c=void 0===c?{deviceHeight:void 0,deviceWidth:void 0}:c;var d=c.deviceHeight,i=c.deviceWidth;return r*d/i},o=Object(r["i"])((function(){var r,o,c,d,i,a;if(t.state.screenshot){var s=null===(r=t.state.domTree)||void 0===r?void 0:r.itree,l=null===(o=t.state.renderTree)||void 0===o?void 0:o.rtree;if(t.state.screenshotBoundType===k["b"].DOM&&s){if(!(null===(c=t.state.selectedDomNode)||void 0===c?void 0:c.bounds))return;var u=s.width,b=s.height,f=(null===(d=e.value)||void 0===d?void 0:d.clientWidth)||0,p=n();return Object(y["b"])(t.state.selectedDomNode,{rootWidth:u,rootHeight:b,imgHeight:p,imgWidth:f})}if(t.state.screenshotBoundType===k["b"].Render&&l){if(!(null===(i=t.state.selectedRenderNode)||void 0===i?void 0:i.bounds))return;var v=l.bounds,O=v.left,h=v.right,m=v.top,j=v.bottom,g=h-O,x=j-m,R=(null===(a=e.value)||void 0===a?void 0:a.clientWidth)||0,w=n();return Object(y["d"])(t.state.selectedRenderNode,{rootWidth:g,rootHeight:x,imgHeight:w,imgWidth:R})}return{marginBounds:{},borderBounds:{},paddingBounds:{},contentBounds:{}}}})),c=function(r){var o,c,d,i,a;if(t.state.isSelectMode){var s=(null===(o=e.value)||void 0===o?void 0:o.clientWidth)||0,l=n(),u=null===(d=null===(c=t.state)||void 0===c?void 0:c.renderTree)||void 0===d?void 0:d.rtree,b=null===(a=null===(i=t.state)||void 0===i?void 0:i.domTree)||void 0===a?void 0:a.itree;if(b){var f=b.width,p=b.height,v=Object(y["c"])({x:r.offsetX,y:r.offsetY},b,{rootWidth:f,rootHeight:p,imgHeight:l,imgWidth:s});if(v.length){console.log("selectedDomNodes",{x:r.offsetX,y:r.offsetY},r,v);var O=v[v.length-1];t.commit("selectDomNode",O),t.commit("setDomExpandedKeys",[O.id])}}if(u){var h=u.bounds,m=h.left,j=h.right,g=h.top,k=h.bottom,x=j-m,R=k-g,w=Object(y["c"])({x:r.offsetX,y:r.offsetY},u,{rootWidth:x,rootHeight:R,imgHeight:l,imgWidth:s});if(w.length){var T=w[w.length-1];t.commit("selectRenderNode",T),t.commit("setRenderExpandedKeys",[T.id]),t.dispatch("getSelectedRenderObject",T)}}}};return{screenshotRef:e,screenshot:Object(r["i"])((function(){return t.getters.screenshotImg})),selectedNodeBounds:o,selectIconColor:Object(r["i"])((function(){var e=function(e){return getComputedStyle(document.documentElement).getPropertyValue(e)};return t.state.isSelectMode?e("--el-color-primary"):e("--color-text-primary")})),selectNode:c}},methods:{update:function(){this.$store.dispatch("getDomTree"),this.$store.dispatch("getRenderTree"),this.$store.dispatch("getScreenshot")},toggleSelectMode:function(){this.$store.commit("toggleSelectMode")}}});n("2fcf");x.render=m,x.__scopeId="data-v-976c4552";var R=x,w=Object(r["hb"])("data-v-7fe52fab");Object(r["I"])("data-v-7fe52fab");var T={class:"attr-wrap"},N=Object(r["o"])("div",{class:"divider"},null,-1);Object(r["G"])();var D=w((function(e,t,n,o,c,d){var i=Object(r["O"])("attr-form");return Object(r["F"])(),Object(r["k"])("div",T,[Object(r["o"])(i,{node:e.selectedDomNode,"title-class":"action-bar",title:"DOM Node"},null,8,["node"]),N,Object(r["o"])(i,{node:e.selectedRenderNode,"title-class":"action-bar",title:"Render Node"},null,8,["node"])])})),S=n("24a6"),E=(n("8ac7"),n("1393")),C=(n("0bd6"),n("e31b")),M=(n("34c0"),n("b64b"),Object(r["hb"])("data-v-20614202"));Object(r["I"])("data-v-20614202");var K={key:2,class:"no-node"};Object(r["G"])();var F=M((function(e,t,n,o,c,d){var i=C["a"],a=Object(r["O"])("attr-form",!0),s=E["a"],l=S["a"];return Object(r["F"])(),Object(r["k"])(r["b"],null,[e.title?(Object(r["F"])(),Object(r["k"])("div",{key:0,class:[e.titleClass,"title"]},Object(r["S"])(e.title),3)):Object(r["l"])("",!0),e.node?(Object(r["F"])(),Object(r["k"])(l,{key:1,class:"attr-form",size:"mini",model:e.node,disabled:!0,"label-position":"left","label-width":"120px"},{default:M((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(Object.keys(e.node),(function(t){return Object(r["F"])(),Object(r["k"])(s,{class:[e.node[t]instanceof Object?"form-in-form":""],label:t,key:t},{default:M((function(){return[e.node[t]instanceof Object?(Object(r["F"])(),Object(r["k"])(a,{key:1,node:e.node[t]},null,8,["node"])):(Object(r["F"])(),Object(r["k"])(i,{key:0,modelValue:e.node[t],"onUpdate:modelValue":function(n){return e.node[t]=n}},null,8,["modelValue","onUpdate:modelValue"]))]})),_:2},1032,["class","label"])})),128))]})),_:1},8,["model"])):(Object(r["F"])(),Object(r["k"])("div",K,"未选择节点"))],64)})),_=Object(r["p"])({name:"AttrForm",components:{},props:["node","title","titleClass"]});n("291f");_.render=F,_.__scopeId="data-v-20614202";var P=_,B=n("d988"),W=Object(r["p"])({name:"Attribute",components:{AttrForm:P},setup:function(){var e=Object(b["b"])();return{selectedDomNode:Object(r["i"])((function(){if(e.state.selectedDomNode){var t=e.state.selectedDomNode,n=Object.assign(Object.assign({},t),{flexNodeStyle:Object.assign(Object.assign({},t.flexNodeStyle),{margin:Object(B["d"])(t.flexNodeStyle.margin),padding:Object(B["d"])(t.flexNodeStyle.padding),border:Object.assign(Object.assign({},Object(B["a"])(t.flexNodeStyle.border)),{color:t.borderColor})})});return delete n.child,n}})),selectedRenderNode:Object(r["i"])((function(){if(e.state.selectedRenderNode){var t=Object.assign({},e.state.selectedRenderNode);return delete t.child,t}}))}}});n("3918");W.render=D,W.__scopeId="data-v-7fe52fab";var I=W,H=n("7f5e"),z=(n("e750"),Object(r["o"])("div",{class:"action-bar"},"Dom Tree",-1));function A(e,t,n,o,c,d){var i=H["a"];return Object(r["F"])(),Object(r["k"])("div",null,[z,Object(r["o"])(i,{data:e.tree,"empty-text":e.emptyText,props:e.treeProps,"node-key":"id",ref:"treeRef","default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1,"highlight-current":"",onNodeClick:e.onNodeClick},null,8,["data","empty-text","props","default-expanded-keys","onNodeClick"])])}var V=Object(r["p"])({name:"DomTree",components:{},setup:function(){var e=Object(r["K"])(null),t=Object(b["b"])();return{tree:Object(r["i"])((function(){var e,n=null===(e=t.state.domTree)||void 0===e?void 0:e.itree;return n?[n]:null})),treeProps:{label:"nodeType",children:"child"},defaultExpandedKeys:Object(r["i"])((function(){var n,r=t.state,o=r.isSelectMode,c=r.domExpandedKeys;return o&&c.length?(null===(n=e.value)||void 0===n||n.setCurrentKey(c[0]),c):[]})),treeRef:e,emptyText:Object(r["i"])((function(){return t.state.getDomTreeError?"获取DOM树失败":"no data"})),onNodeClick:function(n){var r;null===(r=e.value)||void 0===r||r.setCurrentKey(n.id),t.commit("selectDomNode",n),t.commit("setDomExpandedKeys",[])}}},methods:{}});V.render=A;var G=V,$=Object(r["o"])("div",{class:"action-bar"},"Render Tree",-1);function X(e,t,n,o,c,d){var i=H["a"];return Object(r["F"])(),Object(r["k"])("div",null,[$,Object(r["o"])(i,{data:e.tree,props:e.treeProps,"empty-text":e.emptyText,"node-key":"id",ref:"treeRef","default-expanded-keys":e.defaultExpandedKeys,"expand-on-click-node":!1,"highlight-current":"",onNodeClick:e.onNodeClick},null,8,["data","props","empty-text","default-expanded-keys","onNodeClick"])])}var Y=Object(r["p"])({name:"RenderTree",components:{},setup:function(){var e=Object(r["K"])(null),t=Object(b["b"])();return{tree:Object(r["i"])((function(){var e,n=null===(e=t.state.renderTree)||void 0===e?void 0:e.rtree;return n?[n]:null})),treeProps:{label:"name",children:"child"},defaultExpandedKeys:Object(r["i"])((function(){var n,r=t.state,o=r.isSelectMode,c=r.renderExpandedKeys;return o&&c.length?(null===(n=e.value)||void 0===n||n.setCurrentKey(c[0]),c):[]})),treeRef:e,emptyText:Object(r["i"])((function(){return t.state.getRenderTreeError?"获取render树失败":"no data"})),onNodeClick:function(n){var r;null===(r=e.value)||void 0===r||r.setCurrentKey(n.id),t.commit("selectRenderNode",n),t.commit("setRenderExpandedKeys",[]),t.dispatch("getSelectedRenderObject",n)}}},methods:{}});Y.render=X;var J=Y,U=(n("46dc"),Object(r["p"])({name:"App",components:{Multipane:f["a"],MultipaneResizer:f["b"],Screenshot:R,Attribute:I,DomTree:G,RenderTree:J},setup:function(){var e=Object(b["b"])();e.dispatch("getDomTree"),e.dispatch("getRenderTree"),e.dispatch("getScreenshot");var t=Object(r["K"])([{id:1,component:Object(r["R"])(R),style:{width:"25%"},show:!0,tip:"Screenshot",icon:"el-icon-mobile-phone"},{id:2,component:Object(r["R"])(G),style:{width:"25%"},show:!0,tip:"DOM",icon:"el-icon-grape"},{id:3,component:Object(r["R"])(J),style:{width:"25%"},show:!0,tip:"Render",icon:"el-icon-grape"},{id:4,component:Object(r["R"])(I),style:{flex:1},show:!0,tip:"Attribute",icon:"el-icon-menu"}]),n=Object(r["i"])((function(){return t.value.filter((function(e){return e.show}))})),o=function(e){var r=t.value.find((function(t){return t.id===e})),o=n.value,c=o[o.length-1],d=o[o.length-2],i=c.id===e,a=!r.show&&r.id>c.id;i&&(d.style={flex:1}),a&&(r.style={flex:1},1===c.style.flex&&(c.style={width:"25%"})),r.show=!r.show},c=function(e,t){n.value[e].style.width=t};return{panes:t,visiablePanes:n,togglePane:o,onPaneResizeStop:c}}}));n("da2d");U.render=u,U.__scopeId="data-v-748b28ef";var q=U,L=(n("96cf"),n("4160"),n("159b"),n("c975"),n("9ab4")),Q=n("08c1"),Z=n("cde6"),ee=Object(b["a"])({state:{screenshot:void 0,domTree:void 0,renderTree:void 0,selectedDomNode:void 0,selectedRenderNode:void 0,screenshotBoundType:void 0,isSelectMode:!1,domExpandedKeys:[],renderExpandedKeys:[],showScreenshot:!0,showDomTree:!0,showRenderTree:!0,showAttribute:!0,getDomTreeError:!1,getRenderTreeError:!1},getters:{screenshotImg:function(e){var t,n;return(null===(t=e.screenshot)||void 0===t?void 0:t.data)?"data:image/png;base64,".concat(null===(n=e.screenshot)||void 0===n?void 0:n.data):""}},mutations:{updateDomTree:function(e,t){e.domTree=t},updateRenderTree:function(e,t){e.renderTree=t},updateScreenshot:function(e,t){e.screenshot=t},selectDomNode:function(e,t){e.selectedDomNode=t,e.screenshotBoundType=k["b"].DOM},selectRenderNode:function(e,t){t&&(e.selectedRenderNode||(e.selectedRenderNode={}),Object.keys(t).forEach((function(n){e.selectedRenderNode[n]=t[n]})),e.screenshotBoundType=k["b"].Render)},toggleSelectMode:function(e){e.isSelectMode=!e.isSelectMode},setDomExpandedKeys:function(e,t){e.domExpandedKeys=t},setRenderExpandedKeys:function(e,t){e.renderExpandedKeys=t},setVisibility:function(e,t){var n=t.key,r=t.value;-1!==["showScreenshot","showDomTree","showRenderTree","showAttribute"].indexOf(n)&&(e[n]=r)},updateDomTreeError:function(e,t){e.getDomTreeError=t},updateRenderTreeError:function(e,t){e.getRenderTreeError=t}},actions:{getDomTree:function(e){var t=e.commit;return Object(L["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Q["a"])();case 3:n=e.sent,t("updateDomTree",n.result),t("updateDomTreeError",!1),e.next=13;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0),t("updateDomTree",void 0),t("updateDomTreeError",!0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))},getRenderTree:function(e){var t=e.commit;return Object(L["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Q["b"])();case 3:n=e.sent,t("updateRenderTree",n.result),t("updateRenderTreeError",!1),e.next=13;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0),t("updateRenderTreeError",!0),Object(o["b"])({title:"获取Render树失败",type:k["a"].error});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))},getScreenshot:function(e){var t=e.commit;return Object(L["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Q["c"])({format:"png",quality:100,maxWidth:1500,maxHeight:3e3});case 3:n=e.sent,t("updateScreenshot",n.result),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0),Object(o["b"])({title:"获取截图失败",type:k["a"].error});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))},getSelectedRenderObject:function(e,t){var n,r=e.state,c=e.commit;return Object(L["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var d,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.hadFetchedDetailInfo){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(Q["d"])({id:t.id});case 5:if(d=e.sent,null===(n=d.result.rtree)||void 0===n?void 0:n.properties){e.next=8;break}return e.abrupt("return");case 8:delete d.result.rtree.child,i=Object(Z["b"])(d.result.rtree.properties),c("selectRenderNode",Object.assign(Object.assign(Object.assign({},r.selectedRenderNode||{}),i),{hadFetchedDetailInfo:!0})),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](2),console.error(e.t0),Object(o["b"])({title:"获取Render Object失败",type:k["a"].error});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))}},modules:{}}),te=(n("a471"),n("7dd6"),Object(r["j"])(q));te.use(o["d"]),te.use(ee).mount("#app")},b0e7:function(e,t,n){},d075:function(e,t,n){},da2d:function(e,t,n){"use strict";n("ec47")},e5cf:function(e,t,n){},ec47:function(e,t,n){}});
//# sourceMappingURL=ui-inspector.fff6f526.js.map